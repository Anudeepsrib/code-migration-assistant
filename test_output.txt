============================= test session starts =============================
platform win32 -- Python 3.13.1, pytest-8.3.4, pluggy-1.5.0 -- C:\Users\anude\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\anude\Documents\GitHub\code-migration-assistant
configfile: pyproject.toml
plugins: anyio-4.7.0, Faker-40.1.2, langsmith-0.3.45
collecting ... collected 6 items

skills/code-migration/tests/test_migrators.py::TestReactHooksMigrator::test_can_migrate PASSED [ 16%]
skills/code-migration/tests/test_migrators.py::TestReactHooksMigrator::test_migrate_class_component FAILED [ 33%]
skills/code-migration/tests/test_migrators.py::TestReactHooksMigrator::test_migrate_no_change PASSED [ 50%]
skills/code-migration/tests/test_security.py::TestSecurity::test_validate_path_valid PASSED [ 66%]
skills/code-migration/tests/test_security.py::TestSecurity::test_validate_path_traversal PASSED [ 83%]
skills/code-migration/tests/test_security.py::TestSecurity::test_safe_write_backup PASSED [100%]

================================== FAILURES ===================================
_____________ TestReactHooksMigrator.test_migrate_class_component _____________

self = <test_migrators.TestReactHooksMigrator object at 0x00000151B0B74410>

    def test_migrate_class_component(self):
        migrator = ReactHooksMigrator()
        content = """
        import React, { Component } from 'react';
        class MyComp extends Component {
            render() {
                return <div>Hello {this.props.name}</div>;
            }
        }
        """
        new_content = migrator.migrate(content, Path("MyComp.jsx"))
    
        assert "class MyComp" not in new_content
        assert "const MyComp = (props) =>" in new_content
>       assert "return <div>Hello {props.name}</div>" in new_content
E       assert 'return <div>Hello {props.name}</div>' in "import React, { useState, useEffect } from 'react';\n\nconst MyComp = (props) => {\n\n\n  return <div>Hello {props.name\n};\n\nexport default MyComp;\n"

skills\code-migration\tests\test_migrators.py:31: AssertionError
------------------------------ Captured log call ------------------------------
INFO     code_migration:react_hooks.py:28 Migrating component: MyComp in MyComp.jsx
=========================== short test summary info ===========================
FAILED skills/code-migration/tests/test_migrators.py::TestReactHooksMigrator::test_migrate_class_component
========================= 1 failed, 5 passed in 0.26s =========================
